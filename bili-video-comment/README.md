## 使用python脚本爬取B站视频评论  
前段时间，B站的网页版改版了，评论不以页码方式浏览，按时间排序只能从晚到早排序，对看视频刚发布时的评论带来极大的不便，于是写了这个python的脚本，爬取视频下方的所有评论，保存为`.csv`格式，便于查看。脚本仅用于学习交流。  
目前只能一次性爬取视频的全部评论。  

**修改：**  
2021.9： 发现 json 中不再包含楼层，代码中楼层改为 0，原代码行注释。
 顺便修复了父评论子程序中，遇到错误返回，但脚本依然异常退出的错误。
 修复了爬取无评论视频时异常退出的错误。  
2022.8： 最近B站评论增加了属地显示功能，代码在爬取内容中加入了属地和等级信息，增加了只爬取楼主设置，实时保存爬取日志，便于崩溃后查错，优化了代码结构，稍简洁了。  
 注: 属地显示须使用已登录的cookie，代码中的cookie为非用户cookie，若需属地请自行更换cookie。  

## 用法  
代码开头部分为设置：  
>1. `cookie` 如果爬取有问题可以换一下试试  
>2. `file_dir`	保存文件夹路径，默认留空，为运行路径  
>3. `parentOnly` 是否只爬取楼主评论  
>4. `comment_mode` 可为 `1 或 2` 为按楼层或时间排序（逆序）`3` 按热度排序（默认）  
>5. `DebugMode` 调试模式，实时输出请求到的文本(默认关闭)  

直接运行脚本即可，输入av/BV号，或者直接粘贴视频链接，回车即可，爬取完成后将评论保存在指定位置，并自动退出。  
## 完整代码  
[查看完整代码](https://github.com/mlyde/bili-automatic/blob/main/bili-video-comment/bili-video-comment.py) (2022.8 by mlyde)  
